<%= provide(:title, 'Log in') %>

<%= render 'shared/flash_message' %>

<div class="container">
  <h1 class="text-center mt-5 mb-3">Welcome to the Surface Treatment Manager!</h1>
  <h1 class="text-center mb-5">Please login with your account.</h1>
</div>

<div class="container w-25">
  <h3 class="text-center mb-5">Log in</h3>

  <label>Select user</label>
  <ul class="list-group mb-4">
    <li class="list-group-item">
      <div class="form-check">
        <input class="form-check-input" type="radio" name="select_user" id="general_user" value="general_user">
        <label class="form-check-label" for="general_user">General user</label>
      </div>
      <small class="ms-4">Some functions are limited.</small>
    </li>
    <li class="list-group-item">
      <div class="form-check">
        <input class="form-check-input" type="radio" name="select_user" id="admin_user" value="admin_user">
        <label class="form-check-label" for="admin_user">Admin user</label>
      </div>
      <small class="ms-4">All functions are available.</small>
    </li>
  </ul>

  <%= form_with(scope: :session, url: login_path) do |form| %>
    <%= form.label :name %>
    <%= form.text_field :name, class: 'form-control mb-3', id: 'name' %>

    <%= form.label :password %>
    <%= form.password_field :password, class: 'form-control mb-4', id: 'password' %>

    <%= form.submit "Log in", class: 'form-control btn btn-primary' %>
  <% end %>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let radio1 = document.getElementById('general_user');
    let radio2 = document.getElementById('admin_user');
    let usernameField = document.getElementById('name');
    let userpasswordField = document.getElementById('password');

    radio1.addEventListener('change', function() {
      if (radio1.checked) {
        usernameField.value = 'general user';
        userpasswordField.value = 'password';
      }
    });

    radio2.addEventListener('change', function() {
      if (radio2.checked) {
        usernameField.value = "admin user";
        userpasswordField.value = "password";
      }
    });
  });
</script>
