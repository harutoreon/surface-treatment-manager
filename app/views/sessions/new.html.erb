<%= content_for(:title, 'ログイン') %>

<div class="container w-25">
  <h3 class="text-center mt-5 mb-5">ログイン</h3>

  <label>ユーザーの選択</label>
  <ul class="list-group mb-4">
    <li class="list-group-item">
      <div class="form-check">
        <input class="form-check-input" type="radio" name="select_user" id="general_user" value="general_user">
        <label class="form-check-label" for="general_user">一般ユーザー</label>
      </div>
      <small class="ms-4">一部の機能は制限されます。</small>
    </li>
    <li class="list-group-item">
      <div class="form-check">
        <input class="form-check-input" type="radio" name="select_user" id="admin_user" value="admin_user">
        <label class="form-check-label" for="admin_user">管理者ユーザー</label>
      </div>
      <small class="ms-4">すべての機能が利用できます。</small>
    </li>
  </ul>

  <%= form_with(scope: :session, url: login_path) do |form| %>
    <%= form.label :name, "ユーザー名", for: 'name' %>
    <%= form.text_field :name, class: 'form-control mb-3', id: 'name' %>

    <%= form.label :password, "パスワード", for: 'password' %>
    <%= form.password_field :password, class: 'form-control mb-4', id: 'password' %>

    <%= form.submit "ログイン", class: 'form-control btn btn-primary' %>
  <% end %>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    let radio1 = document.getElementById('general_user');
    let radio2 = document.getElementById('admin_user');
    let usernameField = document.getElementById('name');
    let userpasswordField = document.getElementById('password');

    radio1.addEventListener('change', function() {
      if (radio1.checked) {
        usernameField.value = 'general user';
        userpasswordField.value = 'generalpassword';
      }
    });

    radio2.addEventListener('change', function() {
      if (radio2.checked) {
        usernameField.value = 'admin user';
        userpasswordField.value = 'adminpassword';
      }
    });
  });
</script>
